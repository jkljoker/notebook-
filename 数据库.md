# 数据库

## 数据库分类

### 关系型数据库（SQL）

特点：

1 关系型数据库是指采用了关系模型来组织数据的数据库

2 关系型数据库的最大特点就是事务的一致性

3 关系模型就是指二维表格模型，而一个关系型数据库就是由二维表格及其之间的联系所组成的一个数据组织

优点： 容易理解，使用方便，易于维护，支持SQL

缺点： 读写性能较差，表的结构固定

大型：Oracle等；

中型： MySQL、SQL Server等；

小型：Access等；

### 非关系型数据库（NoSQL Not Only SQL）

特点：

1 使用键值对存储数据（key value）

2 分布式

3 非关系型数据库严格上来说不是一种数据库，应该是一种数据结构化存储方法的集合

优点：海量数据的维护和处理非常轻松

缺点：数据和数据没有关系，不能保证数据的完整性和安全性

大型：Memcached （key-value）

中型：MongoDB （Document-oriented）

小型：redis（key-value）

## 数据库

连接数据库： mysql -uusername -ppassword

创建数据库：create database 数据库名；

删除数据库: drop database 数据库名；

选择数据库：use 数据库名；

查询系统数据库：show databases;

查看数据库本地存放位置：show variables like '%datadir%';

## 数据类型

### 数值类型

![image-20231127170357164](/assets/image-20231127170357164.png)

### 日期和时间类型

![image-20231127161922715](/assets/image-20231127161922715.png)

### 字符串类型

![image-20231127162001703](/assets/image-20231127162001703.png)

## 数据表

创建数据表：CREATE TABLE 表名（字段名 字段的数据类型）

添加字段：alter table 表明 add column 字段名 varchar（1）;

修改字段类型：alter table 表名 modify column 字段名 varchar（2）；

修改字段名称：alter change column 字段名1 字段名2 varchar（2）；

删除字段：alter table 表名 drop column 字段名；

修改表名称：alter table 表名 rename to 字段名；

查看数据表：show tables；

查看表结构：desc 表名；

删除数据表：drop table 表名；

## 数据增删改查

### 增（insert）

实例：

向user表中插入数据：

insert into user values（2，’李四‘，18）；

向user表的指定列中插入数据：

insert into user（id，name）values（1，’张三‘）；

### 删（delete from）

实例：

全表数据删除：

DELETE FROM student；
按条件删除数据：

DELETE FROM student WHERE id=2;

### 改（update）

不按条件，修改整个字段：

update user set name='张三'；

按条件修改，修改一个字段：

update user set  name=’李四‘ where id=2；

修改多个字段：

update user set name=’王五‘，age=40 where id=1；

### 查（select）

##### 查询所有字段：

SELECT *FROM 表名；

##### 查询指定的字段：

SELECT 字段名1，字段名2 FROM 表名；

##### 查询时指定别名（AS可以省略）

SELECT 字段名1 AS ’编号1‘，字段名2 AS’编号2‘ FROM 表名；

##### 查询去除重复记录

SELECT DISTINCT 字段名 FROM 表名；



##### 1）逻辑条件：and（与）or（或）

select * form user where id = 1 and name='张三'；

select * form user where id = 1 or name='张三'；

##### 2)比较条件：> < >= <= = <> (between and)

select * from user where age > 18;

select * from user where age = 18;

select * from user where age <> 18;

select * from user where age >= 18;

select * form user where age between 18 and 20;

##### 3)模糊条件：like

模糊替代符号：%：替代任意个字符； _：替代一个字符

select * from user where name like '张_';

select * from user where name like '李%';



#### 分页查询

实例

select * from user limit 2;

select * from user limit 2,3;

#### 聚合查询

实例：

Max()：取最大值

select max(age) from user;

min()：取最小值

select min(age) from user;

avg()：平均函数；

select avg(age) from user;

count()：统计表的记录数量

select count(*) from user;

#### 分组查询

select age,count(*) from user group by age;

#### 排序查询

实例：

asc：升序。数值从小到大，字母a-z

select * from user order by id asc;(对id字段进行升序排列)

desc：降序。数值从大到小，字母z-a

select * from user order by id desc;(对id字段进行降序排列)

## 其他常用查询

##### Select @@tmpdir 查看临时目录

##### Select @@datadir 数据库存放的位置

##### Select @@basedir 数据库服务所在位置

##### Select @@version 查看版号

##### Select @@hostname 查看当前用户名

##### CHAR（ASCII）——返回ASCII码对应的字符

select char(97);

##### ASCII（字符）——返回字符对应的ASCII码

select char('a');

##### IF（逻辑表达式，返回值1，返回值2）——如果逻辑表达式的值为真，则返回1，否则返回2

select if(1=1,2,3);

##### MID（要截取的字符串，起始位置，结束位置）——截取字符串

select mid(’admin‘,1,1);

##### SUBSTR（要截取的字符串，起始位置，结束位置）——截取字符串

select substr('admin',1，1)；

##### LENGTH（字符串）——返回字符长度

select length('aaaaa');

##### left（pa1，pa2）——pa1是被截取字符穿，从左开始截取，pa2是截取的位数

select left('abcdefg',2);

##### right（pa1，pa2）——pa1是被截取字符穿，从右开始截取，pa2是截取的位数

select right('abcdefg',2);

##### user（）——获取登录用户名

##### version（）——获取当前版本号

##### database（）——获取当前数据库

##### sleep（）——休眠
